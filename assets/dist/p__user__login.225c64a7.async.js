(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{"3T1H":function(e,a,t){"use strict";t.r(a);t("T2oS");var n=t("W9HT"),r=(t("Mwp2"),t("VXEj")),c=(t("+L6B"),t("2/Rp")),o=t("o0o1"),i=t.n(o),l=(t("miYZ"),t("tsqr")),s=t("VTBJ"),u=t("HaE+"),m=t("ODXe"),p=(t("fOrg"),t("+KLJ")),d=t("q1tI"),b=t.n(d),f=t("9kvl"),g=t("55Ip"),h=t("c+yx"),_=t("trCS"),E=t("63rs"),v=(t("y8nQ"),t("Vl3Y")),O=(t("Znn+"),t("ZTPi")),j=t("KQm4"),w=t("yUgw"),y=t("TSYQ"),C=t.n(y),x=Object(d["createContext"])({}),N=x,T=(t("14J3"),t("BMrR")),k=(t("jCWc"),t("kPKH")),L=(t("5NDa"),t("5rEg")),S=t("wx14"),I=t("Ff2n"),P=t("BGR+"),U=t("cJ7L"),F=t("MGYb"),J=t("FQ2w"),V=t("cGnJ"),A=t("DdhY"),q=t.n(A),D={UserName:{props:{size:"large",id:"userName",prefix:b.a.createElement(U["a"],{style:{color:"#1890ff"},className:q.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:b.a.createElement(F["a"],{className:q.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:b.a.createElement(J["a"],{className:q.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:b.a.createElement(V["a"],{className:q.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},M=v["a"].Item,B=function(e){var a=e.onChange,t=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,c=e.rules,o={rules:c||r.rules};return a&&(o.onChange=a),t&&(o.initialValue=t),o},G=function(e){var a=Object(d["useState"])(e.countDown||0),t=Object(m["a"])(a,2),n=t[0],r=t[1],o=Object(d["useState"])(!1),s=Object(m["a"])(o,2),p=s[0],f=s[1],g=(e.onChange,e.customProps),h=(e.defaultValue,e.rules,e.name),_=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),v=(e.tabUtil,Object(I["a"])(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),O=Object(d["useCallback"])(function(){var e=Object(u["a"])(i.a.mark((function e(a){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(E["b"])(a);case 2:if(t=e.sent,!1!==t){e.next=5;break}return e.abrupt("return");case 5:l["a"].success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01\u9a8c\u8bc1\u7801\u4e3a\uff1a1234"),f(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]);if(Object(d["useEffect"])((function(){var a=0,t=e.countDown;return p&&(a=window.setInterval((function(){r((function(e){return e<=1?(f(!1),clearInterval(a),t||60):e-1}))}),1e3)),function(){return clearInterval(a)}}),[p]),!h)return null;var j=B(e),w=v||{};if("Captcha"===_){var y=Object(P["a"])(w,["onGetCaptcha","countDown"]);return b.a.createElement(M,{shouldUpdate:!0,noStyle:!0},(function(e){var a=e.getFieldValue;return b.a.createElement(T["a"],{gutter:8},b.a.createElement(k["a"],{span:16},b.a.createElement(M,Object(S["a"])({name:h},j),b.a.createElement(L["a"],Object(S["a"])({},g,y)))),b.a.createElement(k["a"],{span:8},b.a.createElement(c["default"],{disabled:p,className:q.a.getCaptcha,size:"large",onClick:function(){var e=a("mobile");O(e)}},p?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))}))}return b.a.createElement(M,Object(S["a"])({name:h},j),b.a.createElement(L["a"],Object(S["a"])({},g,w)))},H={};Object.keys(D).forEach((function(e){var a=D[e];H[e]=function(t){return b.a.createElement(N.Consumer,null,(function(n){return b.a.createElement(G,Object(S["a"])({customProps:a.props,rules:a.rules},t,{type:e},n,{updateActive:n.updateActive}))}))}}));var K=H,z=v["a"].Item,Q=function(e){var a=e.className,t=Object(I["a"])(e,["className"]),n=C()(q.a.submit,a);return b.a.createElement(z,null,b.a.createElement(c["default"],Object(S["a"])({size:"large",className:n,type:"primary",htmlType:"submit"},t)))},R=Q,Y=O["a"].TabPane,W=function(){var e=0;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(a).concat(e)}}(),Z=function(e){Object(d["useEffect"])((function(){var a=W("login-tab-"),t=e.tabUtil;t&&t.addTab(a)}),[]);var a=e.children;return b.a.createElement(Y,e,e.active&&a)},X=function(e){return b.a.createElement(N.Consumer,null,(function(a){return b.a.createElement(Z,Object(S["a"])({tabUtil:a.tabUtil},e))}))};X.typeName="LoginTab";var $=X,ee=function(e){var a=e.className,t=Object(d["useState"])([]),n=Object(m["a"])(t,2),r=n[0],c=n[1],o=Object(d["useState"])({}),i=Object(m["a"])(o,2),l=i[0],s=i[1],u=Object(w["a"])("",{value:e.activeKey,onChange:e.onTabChange}),p=Object(m["a"])(u,2),f=p[0],g=p[1],h=[],_=[];return b.a.Children.forEach(e.children,(function(e){e&&("LoginTab"===e.type.typeName?h.push(e):_.push(e))})),b.a.createElement(N.Provider,{value:{tabUtil:{addTab:function(e){c([].concat(Object(j["a"])(r),[e]))},removeTab:function(e){c(r.filter((function(a){return a!==e})))}},updateActive:function(e){l&&(l[f]?l[f].push(e):l[f]=[e],s(l))}}},b.a.createElement("div",{className:C()(a,q.a.login)},b.a.createElement(v["a"],{form:e.from,onFinish:function(a){e.onSubmit&&e.onSubmit(a)}},r.length?b.a.createElement(b.a.Fragment,null,b.a.createElement(O["a"],{animated:!1,className:q.a.tabs,activeKey:f,onChange:function(e){g(e)}},h),_):e.children)))};ee.Tab=$,ee.Submit=R,ee.UserName=K.UserName,ee.Password=K.Password,ee.Mobile=K.Mobile,ee.Captcha=K.Captcha;var ae=ee,te=t("oN5p"),ne=t("kgi0"),re=t("dW82"),ce=t("CyIy"),oe=t.n(ce),ie=t("MuoO"),le=t("71ry"),se=t("aCH8"),ue=ae.Tab,me=ae.UserName,pe=ae.Password,de=ae.Submit,be=function(e){var a=e.content;return b.a.createElement(p["a"],{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},fe=function(){var e=new URL(window.location.href),a=Object(h["a"])(),t=a,n=t.redirect;if(n){var r=new URL(n);if(r.origin!==e.origin)return void(window.location.href="/");n=n.substr(e.origin.length),n.match(/^\/.*#/)&&(n=n.substr(n.indexOf("#")+1))}f["H"].replace(n||"/")},ge={github:{icon:b.a.createElement(te["a"],null),title:"GitHub"},gitlab:{icon:b.a.createElement(ne["a"],null),title:"GitLab"},google:{icon:b.a.createElement(re["a"],null),title:"Google"},generic_oauth:{icon:b.a.createElement(le["LoginOutlined"],null),title:"Generic OAuth"}},he=function(e){var a=e.configLoading,t=e.dispatch,o=e.disableLoginForm,p=e.oauth,h=Object(d["useState"])({}),v=Object(m["a"])(h,2),O=v[0],j=v[1],w=Object(d["useState"])(!1),y=Object(m["a"])(w,2),C=y[0],x=y[1],N=Object(f["R"])("@@initialState"),T=N.refresh,k=Object(d["useState"])("account"),L=Object(m["a"])(k,2),S=L[0],I=L[1];Object(d["useEffect"])((function(){t({type:"system/loadSystemConfig"})}),[]);var P=function(){var e=Object(u["a"])(i.a.mark((function e(a){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,a.password=se(a.password),e.next=5,Object(E["a"])(Object(s["a"])(Object(s["a"])({},a),{},{type:S}));case 5:if(t=e.sent,0!==t.code){e.next=13;break}return l["a"].success("\u767b\u9646\u6210\u529f\uff01"),fe(),setTimeout((function(){T()}),0),e.abrupt("return");case 13:l["a"].error(t.msg);case 14:j(t),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),l["a"].error("\u767b\u9646\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01");case 20:x(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(a){return e.apply(this,arguments)}}(),U=O.code,F=O.msg,J=b.a.createElement(ue,{key:"account",tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},1===U&&"account"===F&&!C&&b.a.createElement(be,{content:"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef\uff08admin/confgo\uff09"}),b.a.createElement(me,{name:"userName",placeholder:"\u7528\u6237\u540d: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),b.a.createElement(pe,{name:"password",placeholder:"\u5bc6\u7801: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]}),b.a.createElement(de,{loading:C},"\u767b\u5f55")),V=Object.keys(p).map((function(e){var a=ge[e];return b.a.createElement(r["b"].Item,{key:e},b.a.createElement(c["default"],{style:{width:"100%"},onClick:function(){window.open("/api/admin/user/login/".concat(e),"_blank")}},a.icon," ",a.title))})),A=[];o?"3rd_party"!=S&&I("3rd_party"):A.push(J),A.push(b.a.createElement(ue,{key:"3rd_party",tab:"\u7b2c\u4e09\u65b9\u8d26\u6237\u767b\u5f55"},V.length>0?b.a.createElement(r["b"],null,V):b.a.createElement("div",{className:oe.a.noOAuthLoginChoices},b.a.createElement(le["ExclamationCircleOutlined"],null)," \u6682\u672a\u914d\u7f6e\u7b2c\u4e09\u65b9\u767b\u5f55")));var q=function(){return a?b.a.createElement("div",{className:oe.a.configLoading},b.a.createElement(n["default"],{tip:"\u7cfb\u7edf\u914d\u7f6e\u52a0\u8f7d\u4e2d..."})):b.a.createElement(ae,{activeKey:S,onTabChange:I,onSubmit:P},A)};return b.a.createElement("div",{className:oe.a.container},b.a.createElement("div",{className:oe.a.lang},b.a.createElement(_["a"],null)),b.a.createElement("div",{className:oe.a.content},b.a.createElement("div",{className:oe.a.top},b.a.createElement("div",{className:oe.a.header},b.a.createElement(g["Link"],{to:"/"},b.a.createElement("span",{className:oe.a.title},"Juno"))),b.a.createElement("div",{className:oe.a.desc},"\u5fae\u670d\u52a1\u6cbb\u7406\u5e73\u53f0")),b.a.createElement("div",{className:oe.a.main},q())))},_e=function(e){var a=e.system;return{configLoading:a.configLoading,appUrl:a.appUrl,authProxyEnabled:a.authProxyEnabled,disableLoginForm:a.disableLoginForm,oauth:a.oauth}};a["default"]=Object(ie["connect"])(_e)(he)},CyIy:function(e,a,t){e.exports={container:"container___12Qu8",lang:"lang___2ixE3",content:"content___5CWAk",top:"top___ETIlk",header:"header___1Q-qN",logo:"logo___3JC30",title:"title___3ww2k",desc:"desc___3x2Vm",main:"main___2rucS",configLoading:"configLoading___1DcMj",noOAuthLoginChoices:"noOAuthLoginChoices___OtbsH",icon:"icon___5TklJ",other:"other___3tFpJ",register:"register___1VMmz"}},DdhY:function(e,a,t){e.exports={login:"login___LFxDs",getCaptcha:"getCaptcha___9F10t",icon:"icon___2VK3K",other:"other___2F7Be",register:"register___31gTm",prefixIcon:"prefixIcon___dN9_f",submit:"submit___Q43EO"}}}]);